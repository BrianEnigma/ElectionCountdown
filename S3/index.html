<!doctype HTML>
<html>
<head>
    <title>US Election 2020 Countdown</title>
    <link rel="stylesheet" type="text/css" href="lib/index.css">
    <script type="text/javascript" src="lib/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="lib/index.js"></script>

    <meta http-equiv="refresh" content="600">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.75, maximum-scale=0.75, user-scalable=no" />
    <meta name="description" content="Countdown to the US 2020 Election.">
    <meta name="keywords" content="Election, Elections, US, USPol, Countdown">

    <link rel="icon" type="image/png" href="icons/favicon-32.png">
    <link rel="apple-touch-icon" href="icons/favicon-32.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icons/favicon-128.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/favicon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/favicon-167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/favicon-180.png">
    <link rel="apple-touch-icon" sizes="256x256" href="icons/favicon-256.png">

    <!-- b00kface open graph tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://electioncountdown.org"/>
    <meta property="og:title" content="US Election 2020 Countdown"/>
    <meta property="og:description" content="Countdown to the US 2020 Election."/>
    <meta property="og:site_name" content="US Election 2020 Countdown"/>
    <meta property="og:image" content="https://electioncountdown.org/preview.jpg"/>
    <!-- birdsite tags -->
    <meta name="twitter:creator" content="@brianenigma" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:domain" value="electioncountdown.org" />
    <meta name="twitter:title" value="US Election 2020 Countdown" />
    <meta name="twitter:description" value="Up-to-the-second calculations of the Portland fence fines." />
    <meta name="twitter:image" content="https://electioncountdown.org/preview.jpg" />
    <meta name="twitter:url" value="https://electioncountdown.org" />
</head>
<body>
    <div id="intro">
        Election Countdown
    </div>
    <div id="counters">
        <div id="counterDays">
            &nbsp;
        </div>
        <div id="counterWeeks">
            &nbsp;
        </div>
    </div>
    <div id="counterMessage">
        &nbsp;
    </div>
    <div id="loadingDiv">
        <img src="img/loading.gif" id="loadingImg" />
    </div>

    <div id="dates">
        <h1>Important Dates</h1>

        <h2>2021</h2>
        <ul>
            <li>3 November, 2020 : US federal, state, and local elections</li>
        </ul>

        <h2>2020</h2>
        <ul>
            <li>3 November, 2020 : Election</li>
            <li>14 December, 2020 : <a href="https://en.wikipedia.org/wiki/United_States_Electoral_College#Meeting_of_electors">Electoral College Meets</a></li>
            <li>6 January, 2021 : <a href="https://en.wikipedia.org/wiki/Electoral_Count_Act#Counting_procedures">Electoral Certification by Congress</a></li>
            <li>20 January, 2021 : <a href="https://en.wikipedia.org/wiki/United_States_presidential_inauguration">Inauguration</a></li>
        </ul>
    </div>

    <div id="resources">
        <details>
            <summary>Voting Resources</summary>
            <ul>
                <li class="sticky"><a href="https://866ourvote.org">Election Protection</a> — If anyone is messing with your voting location,
                or you encounter pushback on your paperwork or registration status, or you spot anything else suspicious at
                the polls, call <b>1-866-OUR-VOTE</b>.</li>
                <li><a href="https://www.usa.gov/register-to-vote">Register to Vote</a></li>
                <li><a href="https://www.usa.gov/election-office">State-by-State Voter Registration Deadlines</a></li>
                <li><a href="https://www.usa.gov/absentee-voting">Absentee and Early Voting</a></li>
                <li><a href="https://about.usps.com/what/government-services/election-mail/welcome.htm">USPS delays</a>
                    <ul>
                        <li>Be aware that not all jurisdictions include postage. You may need to provide your own postage stamp.</li>
                        <li>The USPS suggests delays up to 15 days. Return your ballot <i>early</i>.</li>
                    </ul>
                </li>
                <li><a href="https://www.vote.org/covid-19/">Voting &amp; COVID-19</a>: state by state information and requirements</li>
                <li>If you haven't received your absentee ballot in time, you can still use the
                    <a href="https://www.fvap.gov/fwab-privacy-notice">Federal Write-In Absentee Ballot</a> system</li>
                <li>Overseas voting:
                    <ul>
                        <li><a href="https://www.votefromabroad.org">Vote from Abroad</a></li>
                        <li><a href="https://www.overseasvotefoundation.org/vote/home.htm">Overseas Vote</a></li>
                    </ul>
                </li>
            </ul>
        </details>
    </div>

    <div id="arduino">
        <details>
            <summary>Arduino / ESP8266</summary>
            <p>
                I like doing IoT with the <a href="https://www.adafruit.com/product/2821">Adafruit Huzzah</a>, which is
                an ESP8266 (the little brother of the ESP32, having only WiFi, no Bluetooth). It has micro USB and a
                LiPo charger circuit. It's a little more expensive than a no-name ESP32, but I got hooked on these a
                while back and always keep a few spares for random projects. At some point I ended up with an
                <a href="https://www.adafruit.com/product/4128">two-color eInk “FeatherWing”</a> that fits directly on
                the Huzzah. I think maybe that was through an old <a href="https://www.adafruit.com/adabox">AdaBox</a>?
            </p>
            <p>
                At any rate, it's a decent little setup to show
                <a href="https://github.com/BrianEnigma/ElectionCountdown/tree/main/Arduino/ElectionCounter">an example
                of how to use the election countdown timer</a> on my desk.
            </p>
            <p style="text-align:center;">
                <img src="img/arduino_election_countdown.jpg" width="500" height="340" />
            </p>
            <p>
                Feel free to use and adapt it to your own boards and displays. Note that the code, as written,
                doesn't do much to conserve power. It keeps the wifi constantly up. If your application will be
                battery-operated, you may want to take that into consideration.
            </p>
            <div class="detailFooter"></div>
        </details>
    </div>

    <div id="api">
        <details>
            <summary>API</summary>
            <p>
                I've made an API available at <code>https://api.electioncountdown.org/ElectionCountdown</code>.
            </p>

            <h2>API Parameters</h2>
            <ul>
                <li>
                    <code>https://api.electioncountdown.org/ElectionCountdown?brief=0</code> (default) will return all fields.
                </li>
                <li>
                    <code>https://api.electioncountdown.org/ElectionCountdown?brief=1</code> will return only the <code>days</code>
                    and <code>weeks</code> fields. This is useful for parsing in small memory footprint devices, such as an
                    Arduino.
                </li>
            </ul>

            <h2>API Results</h2>
            <p>The following fields are returned, or a subset, depending on the <code>brief</code> parameter:</p>
            <ul>
                <li><code>now</code> : The current date.</li>
                <li><code>target</code> : Target date, 2020-11-03.</li>
                <li><code>tzinfo</code> : The calculation is for the <code>US/Pacific</code> timezone.</li>
                <li><code>days</code> : Number of days until election, or <code>-1</code> if it was in the past.</li>
                <li><code>weeks</code> : Number of weeks until election, rounded to one decimal place.</li>
                <li><code>label</code> : Label for this date..</li>
            </ul>

            <h2>API Limits</h2>
            <p>
                Beyond CORS headers, I have not yet put many restrictions around the API. I'd like to provide the API until
                election day to help raise awareness. But since the results do not change often, I would like to request you
                limit your calls to once every 60 minutes.
            </p>

            <h2>CORS Restrictions</h2>
            <p>
                If a HTTP referrer was passed in, the CORS restrictions are limited to this website. If no referrer was passed
                in &mdash; such as when using <code>curl</code> or connecting from an embedded device &mdash; then
                <code>*</code> is returned.
            </p>
            <p>
                If you are working on a project that requires a custom CORS header, please contact me and we can discuss adding
                a new exception.
            </p>
            <div class="detailFooter"></div>
        </details>
    </div>

    <div id="infrastructure">
        <details>
            <summary>Infrastructure</summary>
            <p>
                This code consists of two parts: a front end and a back end. Both parts are what kids these days call
                “serverless.”
            </p>
            <p>
                The back end is a simple REST API that returns a countdown, in terms of days and weeks. It takes care of
                timezones and time math, giving you a snapshot answer for “now.” While this could have been done
                entirely in JavaScript on the front end, the intention here is to provide a simple API for Internet
                of Things (IoT) devices to query. Not all IoT devices have accurate clocks and date math on small
                form-factor devices adds complexity.
            </p>
            <p>
                The back end is a simple <a href="https://aws.amazon.com/lambda/">AWS Lambda</a> function, written
                in Python. It is fronted by an <a href="https://aws.amazon.com/api-gateway/">AWS API Gateway</a>
                instance running through a custom domain name.
            </p>
            <p>
                The front end is a simple static website that uses JavaScript to hit the back end API and retrieve
                the number of days and weeks. It is served from an <a href="https://aws.amazon.com/s3/">AWS S3</a>
                bucket, routed through <a href="https://aws.amazon.com/cloudfront/">AWS Cloudfront</a> for caching
                and SSL certificates.
            </p>
            <div class="detailFooter"></div>
        </details>
    </div>

    <div id="source">
        <details>
            <summary>Source / License</summary>
            <p>
                The source code can be found at
                <a href="https://github.com/BrianEnigma/ElectionCountdown">https://github.com/BrianEnigma/ElectionCountdown</a>.
                It is licensed under the the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.
            </p>
            <div class="detailFooter"></div>
        </details>
    </div>


</body>
</html>